## 详情页实现思路

### 一.点击商品进入详情页

* GoodsListItem点击
* 点击之后获取商品的iid，跳转到详情页，并且传入iid

### 二.解决 - 首页保持位置状态

* deactivated：记录离开时的位置
* activated： 通过scrollTo函数，设置离开时位置

### 三.详情页的导航栏实现

#### 使用slot插槽

* 返回按钮：left
* 标题列表的展示：center

### 四.请求详情页的数据

* 接口：/detail?iid=

### 五.轮播图的实现

* Swiper/SwiperItem

### 六.商品基本信息的展示

* 数据多样
* 对数据进行汇总：保存到一个对象之中
* 一个对象传入到子组件中

### 七.商品店铺信息的展示

* 获取图片，编写样式
* 给商品销售数量添加过滤器，超过10000单位为万，保留一位小数
* 店铺评分采用table表格编写

### 八.商品图片的展示

* 获取图片列表并显示
* 添加图片监听，对图片的加载设置防抖操作

### 九.商品参数信息的展示

* 采用table表格来排列数据
* 尺码等数据进行多次遍历显示完整

### 十.商品评论信息的展示

* 显示评论时间，要对从服务器获取到的时间戳进行格式化
* yyyy-MM-dd

### 十一.推荐数据的展示

* 请求推荐数据
* GoodsList展示数据

### 十二.mixin的使用

* 创建混入对象：const mixin = {}
* 组件对象中使用: mixins: [mixin,...]

### 十三.标题和内容的联动效果

#### 13.1. 点击标题，滚动到对应的主题

* 在detail中监听标题的点击，获取index
* 滚动到对应的主题：
  * 获取所有主题的offsetTop
  * 如何获取正确的offsetTop
    * 1.created中不行：获取不到元素
    * 2.mounted也不行：数据还没有获取到
    * 3.获取到数据的回调中也不行，DOM还没有渲染完
    * 4.$nextTick也不行，因为图片的敢赌没有被计算在类
    * 5.在图片加载完成后，获取的高度才是正确的

#### 13.2 内容滚动，显示正确的标题

![image-20210807145224293](C:\Users\WE\AppData\Roaming\Typora\typora-user-images\image-20210807145224293.png)

### 十五.底部工具栏的封装

### 十六.详情页的回到顶部

* 使用mixin